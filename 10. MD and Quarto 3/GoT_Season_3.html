<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kevalyn">

<title>Game of Thrones Season Summary</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Assignment_with_params_files/libs/clipboard/clipboard.min.js"></script>
<script src="Assignment_with_params_files/libs/quarto-html/quarto.js"></script>
<script src="Assignment_with_params_files/libs/quarto-html/popper.min.js"></script>
<script src="Assignment_with_params_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Assignment_with_params_files/libs/quarto-html/anchor.min.js"></script>
<link href="Assignment_with_params_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Assignment_with_params_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Assignment_with_params_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Assignment_with_params_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Assignment_with_params_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#game-of-thrones---season-3" id="toc-game-of-thrones---season-3" class="nav-link active" data-scroll-target="#game-of-thrones---season-3">Game of Thrones - Season 3</a>
  <ul class="collapse">
  <li><a href="#warning-spoilers-ahead" id="toc-warning-spoilers-ahead" class="nav-link" data-scroll-target="#warning-spoilers-ahead"><strong>(<em>Warning:</em> spoilers ahead)</strong></a></li>
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview">Overview</a></li>
  </ul></li>
  <li><a href="#summary-for-season-3" id="toc-summary-for-season-3" class="nav-link" data-scroll-target="#summary-for-season-3">Summary for Season 3</a>
  <ul class="collapse">
  <li><a href="#episode-viewvers" id="toc-episode-viewvers" class="nav-link" data-scroll-target="#episode-viewvers">Episode Viewvers</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Game of Thrones Season Summary</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Kevalyn </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="game-of-thrones---season-3" class="level1">
<h1>Game of Thrones - Season 3</h1>
<section id="warning-spoilers-ahead" class="level3">
<h3 class="anchored" data-anchor-id="warning-spoilers-ahead"><strong>(<em>Warning:</em> spoilers ahead)</strong></h3>
<hr>
</section>
<section id="overview" class="level3">
<h3 class="anchored" data-anchor-id="overview">Overview</h3>
<p>(From the <a href="https://en.wikipedia.org/wiki/Game_of_Thrones#Premise">Wikipedia</a>) Game of Thrones is an American fantasy drama television series created by David Benioff and D. B. Weiss for HBO. It is an adaptation of A Song of Ice and Fire, a series of fantasy novels by George R. R. Martin, the first of which is A Game of Thrones.</p>
<p>Set on the fictional continents of Westeros and Essos, Game of Thrones has a large ensemble cast and follows several story arcs throughout the course of the show. A major arc concerns the Iron Throne of the Seven Kingdoms of Westeros through a web of political conflicts among the noble families either vying to claim the throne or fighting for independence from it. Another focuses on the last descendant of the realm’s deposed ruling dynasty, who has been exiled to Essos and is plotting a return to the throne. A third story arc follows the Night’s Watch, a military order defending the realm against threats from the North.</p>
<hr>
</section>
</section>
<section id="summary-for-season-3" class="level1">
<h1>Summary for Season 3</h1>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>got_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(params<span class="sc">$</span>data)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(got_data), <span class="at">caption =</span> <span class="fu">paste</span>(<span class="st">"Preview of Season"</span>, params<span class="sc">$</span>season, <span class="st">"data"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Preview of Season 3 data</caption>
<colgroup>
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 0%">
<col style="width: 90%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">X</th>
<th style="text-align: right;">no_overall</th>
<th style="text-align: right;">no_season</th>
<th style="text-align: left;">title</th>
<th style="text-align: left;">directed_by</th>
<th style="text-align: left;">written_by</th>
<th style="text-align: left;">premiere_date</th>
<th style="text-align: right;">viewers</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">“Valar Dohaeris”</td>
<td style="text-align: left;">Daniel Minahan</td>
<td style="text-align: left;">David Benioff &amp; D. B. Weiss</td>
<td style="text-align: left;">March&nbsp;31,&nbsp;2013&nbsp;(2013-03-31)</td>
<td style="text-align: right;">4.37</td>
<td style="text-align: left;">After the White Walkers’ attack, the surviving Night’s Watchmen, including Samwell Tarly and Jeor Mormont, pledge to return to the Wall and warn the Seven Kingdoms. Jon is brought before Mance Rayder, the “King beyond the Wall”, and pledges his loyalty to the Wildlings. A scarred Tyrion Lannister attempts to negotiate Casterly Rock from Tywin, who offers lesser promises. Margaery Tyrell engages in charitable acts with King’s Landing orphans. Littlefinger offers to help Sansa Stark escape King’s Landing. Ros warns Shae to distrust Littlefinger. Davos is rescued by Saan, who wants to break ties with Stannis Baratheon. Davos returns to Dragonstone where he unsuccessfully tries to kill Melisandre and is imprisoned. She blames him for convincing Stannis not to let her join the battle. In Essos, Daenerys Targaryen arrives in Astapor to buy an army of brutally-trained mercenary soldiers called the “Unsullied”. The Qarth warlocks attempt to assassinate her, but Selmy, a former Kingsguard commander, saves her and pledges his loyalty.</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">“Dark Wings, Dark Words”</td>
<td style="text-align: left;">Daniel Minahan</td>
<td style="text-align: left;">Vanessa Taylor</td>
<td style="text-align: left;">April&nbsp;7,&nbsp;2013&nbsp;(2013-04-07)</td>
<td style="text-align: right;">4.27</td>
<td style="text-align: left;">Brienne continues escorting Jaime Lannister across the Riverlands to King’s Landing. He engages her in a fight, which is interrupted by Bolton soldiers who capture them. Robb Stark receives news that Winterfell was sacked, and his brothers Bran and Rickon have vanished. Robb diverts his attention from the war against the Lannisters to attend the funeral in Riverun for Hoster Tully, Catelyn’s father. This angers Rickard Karstark, who seeks vengeance against the Lannisters for killing his sons. Arya Stark, Gendry and Hot Pie also make for Riverrun, but are waylaid by the rebel “Brotherhood without Banners”. They stop at an inn, where the captured Hound exposes Arya’s identity. Margaery and her grandmother Olenna, the “Queen of Thorns”, persuade Sansa to describe Joffrey’s deviant character. Theon Greyjoy is tortured by unknown captors. Bran, Rickon, Osha, and Hodor encounter siblings Jojen and Meera Reed, children of Stark bannerman, Howland Reed. Jojen, who shares Bran’s strange dreams, tells Bran that he can enter animals’ minds.</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">“Walk of Punishment”</td>
<td style="text-align: left;">David Benioff</td>
<td style="text-align: left;">David Benioff &amp; D. B. Weiss</td>
<td style="text-align: left;">April&nbsp;14,&nbsp;2013&nbsp;(2013-04-14)</td>
<td style="text-align: right;">4.72</td>
<td style="text-align: left;">Robb and Catelyn attend Hoster Tully’s funeral in Riverrun. Tywin Lannister sends Littlefinger to the Eyrie to marry Lysa Arryn to secure her alliance, and makes Tyrion the new Master of Coin. Hot Pie is employed by the inn, while Arya and Gendry follow the Brotherhood. Learning of the massacre at the Fist of the First Men, Rayder sends Jon and a band of Wildlings to scale the Wall and attack the Watch while it is weakened. The surviving Night’s Watch men return to Craster’s Keep, where Gilly gives birth to a son. Theon is freed by an unknown man, who later rescues him again. Melisandre leaves Dragonstone, mysteriously stating that the blood of a king is required for victory. Daenerys barters for the 8,000 Unsullied and the translator Missandei in exchange for one of her young dragons, ignoring Selmy’s and Jorah’s advice. Jaime persuades his captor, Locke, to prevent Brienne being raped by claiming her father will pay a huge ransom; Locke agrees then amputates Jaime’s sword hand.</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">“And Now His Watch Is Ended”</td>
<td style="text-align: left;">Alex Graves</td>
<td style="text-align: left;">David Benioff &amp; D. B. Weiss</td>
<td style="text-align: left;">April&nbsp;21,&nbsp;2013&nbsp;(2013-04-21)</td>
<td style="text-align: right;">4.87</td>
<td style="text-align: left;">Theon’s “rescuer” betrays him, returning him to the prison for more torture. After a failed escape attempt, Jaime believes himself lost without his sword hand; Brienne urges him to remain hopeful. Varys tells Tyrion how he became a eunuch, then shows him the magician who castrated him, who is now his captive. He advises Tyrion be patient for vengeance. At Craster’s Keep, the surviving Night’s Watchmen, starving, come into conflict with their host. Craster and Mormont are slain in the struggle, and Sam flees with Gilly and her new-born son. Arya and Gendry are taken to the Brotherhood’s secret cave, meeting their leader, Dondarrion, who later sentences Sandor Clegane to trial by combat with him. Margaery proposes that Sansa marry Loras, which Sansa finds agreeable, unaware he is gay. Daenerys meets with slaver Kraznys to trade one dragon for the Unsullied army. Once the deal is struck, she commands the Unsullied to kill all the slave masters, and has her dragon burn Kraznys; she frees the Unsullied, who willingly follow her after electing Grey Worm as their leader.</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">“Kissed by Fire”</td>
<td style="text-align: left;">Alex Graves</td>
<td style="text-align: left;">Bryan Cogman</td>
<td style="text-align: left;">April&nbsp;28,&nbsp;2013&nbsp;(2013-04-28)</td>
<td style="text-align: right;">5.35</td>
<td style="text-align: left;">Tyrion, knowing the Crown is deeply in debt to the Iron Bank, persuades Olenna to pay for half of the royal wedding. Sansa tells Littlefinger she wants to remain in King’s Landing. Tywin discovers the Tyrells’ intend to marry Sansa to Loras. To circumvent this, he plots to marry Sansa to Tyrion, and Cersei to Loras over both Lannister’s objections. Stannis confesses his infidelity to his wife, Selyse, who says she knows and approves. Their daughter, Princess Shireen, sneaks into the dungeon to visit Davos and teaches him to read. Sandor is released after killing Dondarrion in the trial by combat. Thoros resurrects Dondarrion, using the Lord of Light’s power. Gendry remains with the Brotherhood, who intend to ransom Arya to Robb. After being delivered to Roose Bolton, Jaime tells Brienne he killed “Mad” King Aerys Targaryen to prevent his destroying King’s Landing with wildfire. Robb executes Lord Karstark after the latter murders two captive Lannister boys. With the Karstarks abandoning him, Robb hopes to make a new alliance with Walder Frey. Ygritte seduces Jon, who breaks his Night’s Watch vows. Daenerys encourages the Unsullied to choose a leader among them; they choose Grey Worm.</td>
</tr>
<tr class="even">
<td style="text-align: right;">11</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">“The Climb”</td>
<td style="text-align: left;">Alik Sakharov</td>
<td style="text-align: left;">David Benioff &amp; D. B. Weiss</td>
<td style="text-align: left;">May&nbsp;5,&nbsp;2013&nbsp;(2013-05-05)</td>
<td style="text-align: right;">5.50</td>
<td style="text-align: left;">In King’s Landing, Tywin coerces Olenna into an agreement to marry Cersei to Loras. Cersei admits to Tyrion that Joffrey tried to have him killed during the siege. Tyrion informs Shae and Sansa about his and Sansa’s betrothal. Littlefinger tells Varys that he discovered Ros was Varys’ informant and that Joffrey killed her. In the Riverlands, Melisandre buys Gendry from the Brotherhood, and foretells Arya that she will kill many people with brown eyes, green eyes, and blue eyes; she promises they will meet again. Having married Talisa, Rob strikes a new agreement with Walder Frey by giving him Harrenhal and having his uncle, Edmure Tully, marry a Frey daughter or granddaughter. Roose Bolton plans to send Jaime to King’s Landing, but refuses to allow Brienne to accompany him. At an unknown location, the mysterious man continues torturing Theon. In the North, tension arises between Osha and Meera. Beyond the Wall, Sam continues his flight with Gilly, while Jon and Ygritte scale the Wall with two other Wildlings.</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Season 3 of <em>Game of Thrones</em> consisted of 10 episodes.</p>
<section id="episode-viewvers" class="level2">
<h2 class="anchored" data-anchor-id="episode-viewvers">Episode Viewvers</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(got_data, <span class="fu">aes</span>(<span class="at">x =</span> no_overall, <span class="at">y =</span> viewers)) <span class="sc">+</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"firebrick"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Viewership - Season"</span>, params<span class="sc">$</span>season),</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Episode (Overall)"</span>, <span class="at">y =</span> <span class="st">"Viewers (millions)"</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Assignment_with_params_files/figure-html/ratings-plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>